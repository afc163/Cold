Cold.add("app.focus",["dom","anim","event"],function(){var c=Cold.dom;var b={style:"fade",duration:300,easing:"linear",direction:"updown",hasDesc:true,hasIndex:true,action:"hover",auto:true,time:5000,outsideCss:false};var a={change:function(){this.curr%=this.length;if(this.desc){var d=this.imgList[this.curr];this.desc.innerHTML=d.getAttribute("title")||d.getAttribute("alt")}if(this.indexList){this.indexList[this.curr].className="selected";this.indexList[this.last].className=""}this[this.config.style]()},none:function(){this.picList[this.last].style.display="none";this.picList[this.curr].style.display=""},fade:function(){var e=this.picList[this.last],d=this.picList[this.curr];e.style.zIndex=10;d.style.zIndex=1;d.style.display="";Cold.anim.fadeOut(e,function(){e.style.display="none";c.opacity(e,"")},this.config.duration,this.config.easing)},roll:function(){c.css(this.picList,"display","");var d;if(this.config.direction==="leftright"){d=parseInt(c.css(this.win,"width"));Cold.anim.run(this.el,{left:-this.curr*d},null,this.config.duration,this.config.easing)}else{d=parseInt(c.css(this.win,"height"));Cold.anim.run(this.el,{top:-this.curr*d},null,this.config.duration,this.config.easing)}},decorate:function(){if(!this.config.outsideCss){c.css(this.win,{position:"relative",overflow:"hidden","font-size":"0"});this.desc&&c.css(this.desc,{position:"absolute",bottom:"0","line-height":"30px","font-size":"14px","z-index":"100","padding-left":"10px"});this.descBg&&c.css(this.descBg,{background:"#000",position:"absolute",bottom:"0",height:"30px","z-index":"100",width:"100%"});this.picIndex&&c.css(this.picIndex,{position:"absolute","z-index":"101",right:"1em",bottom:"6px",font:"14px/16px Helvetica,arial,sans-serif",color:"#666","text-align":"center"});this.indexList&&c.css(this.indexList,{width:"16px",height:"16px","line-height":"16px","float":"left",display:"inline","margin-left":"8px",border:"1px solid #f90",cursor:"pointer",background:"#FFF5E1"});if(this.config.style==="roll"){c.css(this.el,"position","absolute");c.css(this.picList,"position","");if(this.config.direction==="leftright"){c.css(this.picList,{"float":"left","margin-left":"0"});c.css(this.el,"width","32768px")}}else{c.css(this.picList,{position:"absolute","margin-top":"0",left:"0",top:"0"})}}},showDesc:function(){if(this.config.hasDesc){if(!this.desc){this.desc=c.$C("div");this.desc.className="focus_desc";c.css(this.desc,{});var d=this.imgList[this.curr];this.desc.innerHTML=d.getAttribute("title")||d.getAttribute("alt");c.appendEnd(this.win,this.desc)}if(!this.descBg){this.descBg=c.$C("div");this.descBg.className="focus_descBg";c.opacity(this.descBg,0.1);c.appendEnd(this.win,this.descBg)}}},showIndex:function(){if(!this.config.hasIndex){return}this.picIndex=c.$C("ul");this.picIndex.className="focus_picIndex";for(var e=0;e<this.length;e++){var d=c.$C("li");if(e===0){d.className="selected"}d.innerHTML=e+1;(function(g,h){var j=function(){h.last=h.curr;h.curr=g;h.change.call(h)},k;if(this.action==="click"){Cold.event.click(d,j)}else{Cold.event.add(d,"mouseover",function(){k=setTimeout(j,200)});Cold.event.add(d,"mouseout",function(){clearTimeout(k)})}})(e,this);c.appendEnd(this.picIndex,d)}c.appendEnd(this.win,this.picIndex);this.indexList=this.picIndex.getElementsByTagName("li")},autoChange:function(){this.stopAutoChange();if(this.config.auto&&this.config.time>=100){this.changeInter=setInterval((function(d){return function(){d.last=d.curr++;d.change()}})(this),this.config.time)}},stopAutoChange:function(){this.changeInter&&clearInterval(this.changeInter)},init:function(e,d){this.stopAutoChange();this.el=c.$E(e);this.win=this.el.parentNode;this.picList=this.el.getElementsByTagName("li");this.length=this.picList&&this.picList.length||0;this.imgList=this.el.getElementsByTagName("IMG");this.config=Cold.extend(d,b);this.curr=0;this.showIndex();this.showDesc();this.decorate();this.autoChange();(function(f){Cold.event.add(f.win,"mouseover",function(){f.stopAutoChange.call(f)});Cold.event.add(f.win,"mouseout",function(){f.autoChange.call(f)})})(this)}};return function(e,d){a.init(e,d)}});